/*!
 * viewport-units-buggyfill v0.6.1
 * @web: https://github.com/rodneyrehm/viewport-units-buggyfill/
 * @author: Rodney Rehm - http://rodneyrehm.de/en/
 */
(function(a,b){if(typeof define==="function"&&define.amd){define([],b)}else{if(typeof exports==="object"){module.exports=b()}else{a.viewportUnitsBuggyfill=b()}}}(this,function(){var l=false;var i;var E=window.navigator.userAgent;var b=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g;var y=[].forEach;var p;var u;var D;var n=/MSIE [0-9]\./i.test(E);var q=/MSIE [0-8]\./i.test(E);var m=E.indexOf("Opera Mini")>-1;var d=/(iPhone|iPod|iPad).+AppleWebKit/i.test(E)&&(function(){var e=E.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<10})();var w=(function(){var H=E.indexOf(" Android ")>-1;if(!H){return false}var G=E.indexOf("Version/")>-1;if(!G){return false}var e=parseFloat((E.match("Android ([0-9.]+)")||[])[1]);return e<=4.4})();if(!n){n=!!navigator.userAgent.match(/MSIE 10\.|Trident.*rv[ :]*1[01]\.| Edge\/1\d\./)}try{new t("test")}catch(B){var t=function(G,H){var e;H=H||{bubbles:false,cancelable:false,detail:undefined,};e=document.createEvent("CustomEvent");e.initCustomEvent(G,H.bubbles,H.cancelable,H.detail);return e};t.prototype=window.Event.prototype;window.CustomEvent=t}function j(e,H){var G;return function(){var J=this;var I=arguments;var K=function(){e.apply(J,I)};clearTimeout(G);G=setTimeout(K,H)}}function h(){try{return window.self!==window.top}catch(G){return true}}function c(e){if(l){return}if(e===true){e={force:true,}}i=e||{};i.isMobileSafari=d;i.isBadStockAndroid=w;if(i.ignoreVmax&&!i.force&&!q){n=false}if(q||(!i.force&&!d&&!n&&!w&&!m&&(!i.hacks||!i.hacks.required(i)))){if(window.console&&q){console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below")}return{init:function(){},}}window.dispatchEvent(new t("viewport-units-buggyfill-init"));i.hacks&&i.hacks.initialize(i);l=true;D=document.createElement("style");D.id="patched-viewport";document.head.appendChild(D);o(function(){var G=j(k,i.refreshDebounceWait||100);window.addEventListener("orientationchange",G,true);window.addEventListener("pageshow",G,true);if(i.force||n||h()){window.addEventListener("resize",G,true);i._listeningToResize=true}i.hacks&&i.hacks.initializeEvents(i,k,G);k()})}function A(){D.textContent=z();D.parentNode.appendChild(D);window.dispatchEvent(new t("viewport-units-buggyfill-style"))}function k(){if(!l){return}v();setTimeout(function(){A()},1)}function g(H){try{if(!H.cssRules){return}}catch(J){if(J.name!=="SecurityError"){throw J}return}var K=[];for(var G=0;G<H.cssRules.length;G++){var I=H.cssRules[G];K.push(I)}return K}function v(){u=[];y.call(document.styleSheets,function(G){var e=g(G);if(!e||G.ownerNode.id==="patched-viewport"||G.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore"){return}if(G.media&&G.media.mediaText&&window.matchMedia&&!window.matchMedia(G.media.mediaText).matches){return}y.call(e,s)});return u}function s(I){if(I.type===7){var G;try{G=I.cssText}catch(H){return}b.lastIndex=0;if(b.test(G)){u.push([I,null,G]);i.hacks&&i.hacks.findDeclarations(u,I,null,G)}return}if(!I.style){if(!I.cssRules){return}y.call(I.cssRules,function(e){s(e)});return}y.call(I.style,function(e){var J=I.style.getPropertyValue(e);if(I.style.getPropertyPriority(e)){J+=" !important"}b.lastIndex=0;if(b.test(J)){u.push([I,e,J]);i.hacks&&i.hacks.findDeclarations(u,I,e,J)}})}function z(){p=x();var H=[];var e=[];var G;var I;u.forEach(function(M){var L=r.apply(null,M);var J=L.selector.length?(L.selector.join(" {\n")+" {\n"):"";var K=new Array(L.selector.length+1).join("\n}");if(!J||J!==G){if(e.length){H.push(G+e.join("\n")+I);e.length=0}if(J){G=J;I=K;e.push(L.content)}else{H.push(L.content);G=null;I=null}return}if(J&&!G){G=J;I=K}e.push(L.content)});if(e.length){H.push(G+e.join("\n")+I)}if(m){H.push("* { content: normal !important; }")}return H.join("\n\n")}function r(K,G,J){var e;var H=[];e=J.replace(b,C);if(i.hacks){e=i.hacks.overwriteDeclaration(K,G,e)}if(G){H.push(K.selectorText);e=G+": "+e+";"}var I=K.parentRule;while(I){if(I.media){H.unshift("@media "+I.media.mediaText)}else{if(I.conditionText){H.unshift("@supports "+I.conditionText)}}I=I.parentRule}return{selector:H,content:e,}}function C(e,I,H){var G=p[H];var J=parseFloat(I)/100;return(J*G)+"px"}function x(){var G=window.innerHeight;var e=window.innerWidth;return{vh:G,vw:e,vmax:Math.max(e,G),vmin:Math.min(e,G),}}function o(e){var G=0;var H=function(){G--;if(!G){e()}};y.call(document.styleSheets,function(I){if(!I.href||F(I.href)===F(location.href)||I.ownerNode.getAttribute("data-viewport-units-buggyfill")==="ignore"){return}G++;f(I.ownerNode,H)});if(!G){e()}}function F(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function f(G,e){a(G.href,function(){var H=document.createElement("style");H.media=G.media;H.setAttribute("data-href",G.href);H.textContent=this.responseText;G.parentNode.replaceChild(H,G);e()},e)}function a(G,I,e){var H=new XMLHttpRequest();if("withCredentials" in H){H.open("GET",G,true)}else{if(typeof XDomainRequest!=="undefined"){H=new XDomainRequest();H.open("GET",G)}else{throw new Error("cross-domain XHR not supported")}}H.onload=I;H.onerror=e;H.send();return H}return{version:"0.6.1",findProperties:v,getCss:z,init:c,refresh:k,}}));